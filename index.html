<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flower Letter â€” Open Me</title>
<style>
  :root{
    --bg1:#fff0f7; --bg2:#ffeef6; --pink:#ff4f85; --deep:#b21f57;
    --shadow: 0 18px 40px rgba(18,10,20,0.14);
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{
    background:
      radial-gradient(1200px 600px at 10% 10%, rgba(255,200,230,0.12), transparent 10%),
      radial-gradient(1000px 500px at 90% 90%, rgba(255,230,240,0.10), transparent 10%),
      linear-gradient(180deg,var(--bg1), var(--bg2));
    display:flex;align-items:center;justify-content:center;padding:28px;overflow:hidden;
  }
  /* subtle floral repeat */
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cg fill='none'%3E%3Ccircle cx='18' cy='18' r='3' fill='%23ffd6e8'/%3E%3Cpath d='M60 10c8 0 8 18 0 18s-8-18 0-18z' fill='%23ffe8f2'/%3E%3Cpath d='M90 60c6 0 6 12 0 12s-6-12 0-12z' fill='%23ffdbe8'/%3E%3C/g%3E%3C/svg%3E");
    opacity:0.12; background-repeat:repeat; transform:scale(1.6); mix-blend-mode:overlay;
  }

  .card{
    width:min(980px,96vw); max-width:980px; border-radius:22px; padding:26px;
    box-shadow:var(--shadow); background:linear-gradient(180deg, rgba(255,255,255,0.88), rgba(255,250,252,0.92));
    display:flex; align-items:center; justify-content:center; position:relative;
  }

  .envelope-wrap{ width:100%; max-width:760px; display:flex; justify-content:center; align-items:flex-start; perspective:1400px; position:relative; }

  .envelope{
    width:78%; min-width:300px; max-width:680px; height:360px; background:linear-gradient(180deg,#fffdf9,#fff6fb);
    border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.08); position:relative; overflow:visible;
    cursor:pointer;
  }

  .flap{
    position:absolute; left:0; right:0; height:170px;
    background: linear-gradient(180deg,#ffdfee,#ffcbe7);
    border-top-left-radius:16px; border-top-right-radius:16px;
    transform-origin: top center; transform-style:preserve-3d;
    transition: transform 900ms cubic-bezier(.2,.9,.2,1), box-shadow 300ms;
    z-index:8; display:flex; align-items:center; justify-content:center;
  }

  .ribbon{
    position:absolute; left:50%; transform:translateX(-50%); top:130px;
    width:220px; height:36px; border-radius:20px;
    background: linear-gradient(90deg,#ff7aa3,#ff4f85 60%); box-shadow: 0 8px 18px rgba(255,80,120,0.18);
    display:flex; align-items:center; justify-content:center; color:white; font-weight:700; letter-spacing:0.6px;
    z-index:9; transition: transform 750ms cubic-bezier(.2,.9,.2,1), opacity 300ms;
  }

  .ribbon .knot{
    width:38px; height:38px; border-radius:50%;
    background:linear-gradient(180deg,#ff2b6a,#b20f4a);
    box-shadow: 0 6px 18px rgba(178,15,74,0.2);
    position:absolute; left:calc(50% - 19px); top:-8px; transform:rotate(12deg);
  }

  .letter{
    position:absolute; left:12px; right:12px; bottom:18px; top:120px;
    background: linear-gradient(180deg,#fffefc,#fff8fb); border-radius:12px; padding:36px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    transform-origin:center bottom; transition: transform 800ms cubic-bezier(.2,.9,.2,1), opacity 650ms;
    z-index:4; overflow:auto;
  }

  .letter h1{ margin:0 0 8px 0; font-size: clamp(18px, 2.2vw, 36px); color:var(--deep); letter-spacing:-0.6px; }
  .letter p{ margin:0; color:#6b2b4b; line-height:1.6; font-size: clamp(14px,1.6vw,18px); white-space:pre-wrap; }

  /* Open state */
  .envelope.open .flap{ transform: rotateX(-180deg) translateZ(20px); box-shadow: 0 40px 80px rgba(18,10,20,0.16); }
  .envelope.open .ribbon{ transform: translateX(-50%) translateY(-46px) scale(0.88) rotate(-8deg); opacity:0.95; }
  .envelope.open .ribbon .knot{ transform: rotate(-40deg); }
  .envelope.open .letter{ transform: translateY(-76px) scale(1.02); opacity:1; }

  .click-hint{ font-size:13px;color:#b33b6a;margin-top:14px;text-align:center; user-select:none; }

  /* small footer */
  .credit{ font-size:12px;color:#7a3f5f; opacity:0.85; text-align:center; margin-top:10px; }

  @media (max-width:700px){
    .envelope{ height:300px; }
    .flap{ height:150px; }
    .ribbon{ top:110px; width:78%; }
    .card{ padding:18px; border-radius:14px; }
  }
</style>
</head>
<body>

<div class="card" id="card">
  <div class="envelope-wrap">
    <div class="envelope" id="envelope" aria-hidden="false" title="Click to open">
      <div class="flap" id="flap" aria-hidden="true">
        <svg width="220" height="80" viewBox="0 0 220 80" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform:translateY(20px);">
          <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#fff"/><stop offset="1" stop-color="#ffd6e8"/></linearGradient></defs>
          <path d="M10 70 Q110 6 210 70 L210 80 L10 80 Z" fill="url(#g)" opacity="0.95"/>
          <g transform="translate(84,34) scale(0.9)"><path d="M12 2 c4 -6 14 -6 18 0 c4 6 -2 14 -9 20 c-7 -6 -13 -14 -9 -20z" fill="#ff7aa3" opacity="0.9"/></g>
        </svg>
      </div>

      <div class="ribbon" id="ribbon">
        <div class="knot"></div>
        Open with love
      </div>

      <div class="letter" id="letter">
        <h1 id="letterTitle">A Special Letter â€” For My Pyare Didiiiii ðŸŒ¸</h1>
        <p id="letterText">Didiiii sunooooo-
App na sach mai bohot brave ho itna sab kuch akele handle karlete
sab kuch karlete chaiye woh stream ho vidoes bana ho ghar ko sambhalna ho
ya phir kuch bhi but ma gussa hu ðŸ˜¤ appse itna kaam karte ho stress toh hoga na
phir akele itna kuch soch lete ho share bhi nhi karte app roye na bohot bura laga 
apko pata jab app kuch share karte ho na kabhi nhi socha ajj tak itna bolte ha didi aise karke
ulta mereko pata mere pyare didi sabse acha kab lagta jab app khud se bolte call karu aur sab batate
usee acha toh lag hi nhi sakta khud sab share karte mere pyare didi ho pata ha chota hu bohot bolta hu
but tension toh hoge na apne didi ki itne pyare didi mile ha age se nhi karna aise samjhe pyare Didi
aur kuch bhi ho koi bhi situation ho apka bhai hamesha hamesha apke sath rahega woh kabhi kabhi ghar
wale ajate toh woh thoda na hehe adjust karlena didi ðŸ¥¹ you are best didiiiiiii ðŸŒŽðŸ¤—

Love you didiiiiii ðŸ¥¹ðŸŒŽ.</p>
      </div>
    </div>
  </div>
  <div class="click-hint" id="clickHint">Click the ribbon or letter to open âœ¨</div>
</div>

<!-- petals canvas -->
<canvas id="petalCanvas" style="position:fixed;inset:0;pointer-events:none;z-index:3"></canvas>

<script>
/* ---------- Elements & basic open/close ---------- */
const envelope = document.getElementById('envelope');
const ribbon = document.getElementById('ribbon');
const letter = document.getElementById('letter');
const clickHint = document.getElementById('clickHint');
let isOpen = false;

function setOpen(open, sound=true){
  isOpen = open;
  envelope.classList.toggle('open', open);
  clickHint.textContent = open ? "Letter opened ðŸŒ¸" : "Click the ribbon or letter to open âœ¨";
  if(open && sound) playChime();
}
ribbon.addEventListener('click', e=> { e.stopPropagation(); setOpen(!isOpen); });
letter.addEventListener('click', e=> { e.stopPropagation(); setOpen(!isOpen); });
document.getElementById('card').addEventListener('click', ()=> setOpen(!isOpen));
window.addEventListener('keydown', (e)=>{ if(e.code === 'Space'){ e.preventDefault(); setOpen(!isOpen); } });

/* ---------- WebAudio chime ---------- */
function playChime(){
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const now = ctx.currentTime;
    const freqs = [880, 1320, 1760];
    freqs.forEach((f,i)=>{
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      o.frequency.setValueAtTime(f, now + i*0.03);
      g.gain.setValueAtTime(0, now + i*0.03);
      g.gain.linearRampToValueAtTime(0.09, now + i*0.03 + 0.01);
      g.gain.exponentialRampToValueAtTime(0.001, now + i*0.03 + 0.7);
      o.connect(g); g.connect(ctx.destination);
      o.start(now + i*0.03);
      o.stop(now + i*0.03 + 0.9);
    });
  } catch(e){ /* ignore if blocked */ }
}

/* ---------- Petals canvas ---------- */
const canvas = document.getElementById('petalCanvas');
const ctx = canvas.getContext('2d');
let w = canvas.width = innerWidth;
let h = canvas.height = innerHeight;
window.addEventListener('resize', ()=> { w = canvas.width = innerWidth; h = canvas.height = innerHeight; });

let petals = [];
let petalCount = 80; // fixed density for shareable version

function rand(min,max){ return Math.random()*(max-min)+min; }

class Petal{
  constructor(){ this.reset(); }
  reset(){
    this.x = rand(0,w);
    this.y = rand(-h,0);
    this.size = rand(8,26);
    this.speedY = rand(0.2,1.2);
    this.speedX = rand(-0.6,0.6);
    this.rot = rand(0,Math.PI*2);
    this.rotSpeed = rand(-0.02,0.02);
    this.color = `hsla(${rand(320,350)},70%,${rand(55,75)}%,${rand(0.7,0.95)})`;
    this.swing = rand(20,140);
    this.life = rand(0,Math.PI*2);
  }
  update(){
    this.life += 0.02;
    this.x += Math.sin(this.life/this.swing)*0.6 + this.speedX;
    this.y += this.speedY;
    this.rot += this.rotSpeed;
    if(this.y > h + 40) this.reset();
  }
  draw(){
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rot);
    ctx.beginPath();
    ctx.moveTo(0, -this.size/2);
    ctx.quadraticCurveTo(this.size/2, -this.size/2, this.size/2, 0);
    ctx.quadraticCurveTo(this.size/2, this.size/2, 0, this.size/2);
    ctx.quadraticCurveTo(-this.size/2, this.size/2, -this.size/2, 0);
    ctx.quadraticCurveTo(-this.size/2, -this.size/2, 0, -this.size/2);
    ctx.closePath();
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.restore();
  }
}

function initPetals(count){
  petals = [];
  for(let i=0;i<count;i++) petals.push(new Petal());
}
initPetals(petalCount);

let petalOn = true;
function clearCanvas(){ ctx.clearRect(0,0,w,h); }

function frame(){
  if(petalOn){
    ctx.clearRect(0,0,w,h);
    for(let p of petals){ p.update(); p.draw(); }
  }
  requestAnimationFrame(frame);
}
frame();

/* initial closed state without sound */
setOpen(false,false);

/* Optional: allow long-press 3s to reset letter to default (for owner) */
/* Not exposed in UI; can be removed if undesired */


</script>
</body>
</html>

